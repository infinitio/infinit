import drake
import drake.cxx
import sys

hermes_client = None
hermes_server = None

def configure(protocol,
              reactor,
              boost = None,
              prefix = drake.Path('/usr/local'),
              cxx_toolkit = None,
              cxx_config = None):

  cxx_config = drake.cxx.Config(cxx_config)

  server = drake.include('server/',
                         protocol = protocol,
                         reactor = reactor,
                         boost = boost,
                         prefix = prefix,
                         cxx_toolkit = cxx_toolkit,
                         cxx_config = cxx_config)

  client = drake.include('client/',
                         protocol = protocol,
                         reactor = reactor,
                         hermes_server_lib = server.library,
                         boost = boost,
                         prefix = prefix,
                         cxx_toolkit = cxx_toolkit,
                         cxx_config = cxx_config)

  global hermes_server
  hermes_server = server.library

  global hermes_client
  hermes_client = client.library
